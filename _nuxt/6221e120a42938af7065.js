(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{252:function(t,e,n){var content=n(265);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(82).default)("66540624",content,!0,{sourceMap:!1})},253:function(t,e,n){"use strict";n(23);var r=n(6),o={name:"CopyShareButton",props:{shareLink:{type:String,default:""},buttonType:{type:String,default:"is-primary"},buttonText:{type:String,default:"Copy"},showTooltip:{type:Boolean,default:!0}},data:function(){return{deleting:!1}},computed:{buttonClass:function(){return"button "+this.buttonType}},methods:{copyShareLink:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$copyText(t.shareLink);case 3:t.$buefy.toast.open({message:"Link copied!",type:"is-success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},l=n(18),component=Object(l.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-tooltip",{attrs:{label:this.shareLink,position:"is-left",active:this.showTooltip}},[e("b-button",{class:this.buttonClass,on:{click:this.copyShareLink}},[this._v("\n    "+this._s(this.buttonText)+"\n  ")])],1)}),[],!1,null,"2130e876",null);e.a=component.exports},264:function(t,e,n){"use strict";var r=n(252);n.n(r).a},265:function(t,e,n){(e=n(81)(!1)).push([t.i,"#newButton[data-v-444802d0]{margin-top:1rem}",""]),t.exports=e},270:function(t,e,n){"use strict";n.r(e);var r=n(102),o=(n(23),n(6)),l=n(39),c=n.n(l),d=n(34);n(60),n(35),n(16),n(24),n(38);function h(){var data=Object(r.a)(["\n        mutation deleteItinerary($id: ID!) {\n          deleteItinerary(id: $id) {\n            id\n          }\n        }\n      "]);return h=function(){return data},data}var f={name:"DeleteButton",props:{id:{type:String,default:""},name:{type:String,default:""}},data:function(){return{deleting:!1}},methods:{deleteItinerary:function(){var t=this;if(this.deleting=!0,confirm("Are you sure you want to delete? "+this.name)){var e=this.$apollo.getClient(),n=c()(h()),r={id:this.id};e.mutate({mutation:n,variables:r}).then((function(e){e.data;t.$emit("itinerary-deleted",t.id),t.$buefy.toast.open({message:"Itinerary deleted."})})).catch((function(e){console.error(e),t.deleting=!1,t.$buefy.toast.open({message:"Itinerary failed to delete, please try again.",type:"is-danger"})}))}else this.deleting=!1}}},y=n(18),v={name:"List",components:{DeleteButton:Object(y.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",{attrs:{type:"is-danger",disabled:t.deleting},on:{click:function(e){return t.deleteItinerary()}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.deleting,expression:"!deleting"}]},[t._v("Delete")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.deleting,expression:"deleting"}]},[t._v("Deleting...")])])}),[],!1,null,"0f21742d",null).exports,CopyShareButton:n(253).a},props:{itineraryData:{type:Array,default:function(){return[]}}},data:function(){return{itineraries:this.itineraryData,baseUrl:"https://zacharyw.github.io/wdw-planner"}},methods:{deleteItinerary:function(t){var e=null,n=!0,r=!1,o=void 0;try{for(var l,c=this.itineraries.entries()[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var h=Object(d.a)(l.value,2),i=h[0];if(h[1].id===t){e=i;break}}}catch(t){r=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}this.itineraries.splice(e,1)}}};function m(){var data=Object(r.a)(["\n        query {\n          itineraries {\n            id\n            name\n            hotel\n            checkIn\n            checkOut\n            shareToken\n          }\n        }\n      "]);return m=function(){return data},data}var w={name:"HomePage",components:{List:Object(y.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{attrs:{data:t.itineraries,"default-sort":"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"name",label:"Name",sortable:""}},[n("nuxt-link",{attrs:{to:"/itineraries/"+e.row.id}},[t._v("\n          "+t._s(e.row.name)+"\n        ")])],1),t._v(" "),n("b-table-column",{attrs:{field:"hotel",label:"Hotel",sortable:""}},[t._v("\n        "+t._s(e.row.hotel)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"checkIn",label:"Check In",sortable:""}},[t._v("\n        "+t._s(null==e.row.checkIn?"":e.row.checkIn.substring(0,10))+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"checkOut",label:"Check Out",sortable:""}},[t._v("\n        "+t._s(null==e.row.checkOut?"":e.row.checkOut.substring(0,10))+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{label:"Actions"}},[n("nuxt-link",{attrs:{to:"/itineraries/"+e.row.id}},[n("b-button",{attrs:{type:"is-link"}},[t._v("Edit")])],1),t._v(" "),n("nuxt-link",{attrs:{to:"/itinerary/"+e.row.shareToken}},[n("b-button",{attrs:{type:"is-link is-info"}},[t._v("View")])],1),t._v(" "),n("DeleteButton",{attrs:{id:e.row.id,name:e.row.name},on:{"itinerary-deleted":t.deleteItinerary}}),t._v(" "),n("CopyShareButton",{attrs:{"share-link":t.baseUrl+"/itinerary/"+e.row.shareToken,"button-type":"is-light","button-text":"Copy Share Link"}})],1)]}}])})],1)}),[],!1,null,"614e027e",null).exports},data:function(){return{itineraries:[]}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.app.apolloProvider.defaultClient.query({query:c()(m())});case 2:return n=e.sent,data=n.data,e.abrupt("return",{itineraries:data.itineraries});case 5:case"end":return e.stop()}}),e)})))()},methods:{newItinerary:function(){this.$router.push("/itineraries/0")}}},k=(n(264),Object(y.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[this._v("Itineraries")]),this._v(" "),e("List",{attrs:{"itinerary-data":this.itineraries}}),this._v(" "),e("b-button",{attrs:{id:"newButton"},on:{click:this.newItinerary}},[this._v("New Itinerary")])],1)])}),[],!1,null,"444802d0",null));e.default=k.exports}}]);